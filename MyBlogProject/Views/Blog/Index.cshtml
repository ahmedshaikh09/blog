
@model List<IndexBlogViewModel>

@{
    ViewBag.Title = "Index";
}

@section scripts {
    <script src="~/Scripts/indexBlog.js" type="text/javascript"></script>
}

<header class="masthead" style="background-image:url('/Content/img/post-sample-image.jpg')">
    <div class="overlay">
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">

                <div class="site-heading">

                    <h1>Read And Upload Blogs</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<a class="btn btn-primary" href="@Url.Action("Add", "Blog")">Upload New Vlog</a>

@if (!Model.Any())
{
    <div style="margin-top:15px;">
        <p><strong>Ooppss! There are no blogs uploaded at the moment</strong></p>
    </div>
}
else
{

    <div class="container">

        <div class="row">

            <div class="col-lg-8 col-md-10 mx-auto">
                @foreach (var record in Model)
                {
                    if (record.Published == false && User.IsInRole("Admin"))
                    {
                        <h2 style="padding-top:70px; font-family: 'Global Sans Serif'; color: seagreen;">
                            @record.Title
                        </h2>
                        <div class="row">
                            <div class="col-md-2">
                                @if (!string.IsNullOrWhiteSpace(record.MediaUrl))
                                {
                                    <img class="img-responsive" src="@Url.Content(record.MediaUrl)" />
                                }
                            </div>
                        </div>
                        <p>
                            @Html.Raw(record.Body)
                        </p>
                        <span style="padding-top:20px; font-style: italic; color: seagreen;">
                            Posted on:
                            @record.DateCreated <br />

                        </span>



                        <span style="padding-top:20px; font-style: italic; color: seagreen;">
                            Published:
                            @record.Published <br />

                        </span>


                        <a class="btn btn-primary" href="@Url.Action("ReadMore", "Blog", new { title = record.Title })">Read More</a>

                        <a class="btn btn-primary" href="@Url.Action("Edit", "Blog", new { id = record.Id })">Edit</a>

                        <form method="post" action="@Url.Action("Delete", "Blog", new { id = record.Id })">
                            <a href="#" class="btn-delete">Delete</a>
                        </form>


                    }
                    else if (record.Published == true)
                    {
                        <h2 style="padding-top:70px; font-family: 'Global Sans Serif'; color: seagreen;">
                            @record.Title
                        </h2>
                        <div class="row">
                            <div class="col-md-2">
                                @if (!string.IsNullOrWhiteSpace(record.MediaUrl))
                                {
                                    <img class="img-responsive" src="@Url.Content(record.MediaUrl)" />
                                }
                            </div>
                        </div>
                        <p>
                            @Html.Raw(record.Body)
                        </p>
                        <span style="padding-top:20px; font-style: italic; color: seagreen;">
                            Posted on:
                            @record.DateCreated <br />

                        </span>

                        if (User.IsInRole("Admin"))
                        {

                            <span style="padding-top:20px; font-style: italic; color: seagreen;">
                                Published:
                                @record.Published <br />

                            </span>
                        }

                        <a class="btn btn-primary" href="@Url.Action("ReadMore", "Blog", new { title = record.Title })">Read More</a>

                        if (User.IsInRole("Admin"))
                        {
                            <a class="btn btn-primary" href="@Url.Action("Edit", "Blog", new { id = record.Id })">Edit</a>

                            <form method="post" action="@Url.Action("Delete", "Blog", new { id = record.Id })">
                                <a href="#" class="btn-delete">Delete</a>
                            </form>

                        }
                    }
                }

            </div>

            <hr>
        </div>
    </div>

}
